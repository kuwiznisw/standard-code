{"version":3,"file":"src_app_location_location_module_ts.js","mappings":"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","sources":["./src/app/location/location-routing.module.ts","./src/app/location/location.module.ts","./src/app/location/location.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LocationPage } from './location.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LocationPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LocationPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LocationPageRoutingModule } from './location-routing.module';\r\n\r\nimport { LocationPage } from './location.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LocationPageRoutingModule\r\n  ],\r\n  declarations: [LocationPage]\r\n})\r\nexport class LocationPageModule {}\r\n","// home.page.ts\r\nimport { Component, ViewChild, ElementRef } from '@angular/core';\r\n\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\r\n\r\ndeclare let google;\r\n\r\n@Component({\r\n  selector: 'app-location',\r\n  templateUrl: 'location.page.html',\r\n  styleUrls: ['location.page.scss'],\r\n})\r\nexport class LocationPage {\r\n\r\n  @ViewChild('map', { static: false }) mapElement: ElementRef;\r\n  map: any;\r\n  address: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  accuracy: number;\r\n\r\n  constructor(\r\n    private geolocation: Geolocation,\r\n    private nativeGeocoder: NativeGeocoder) {\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.loadMap();\r\n  }\r\n\r\n  loadMap() {\r\n    this.geolocation.getCurrentPosition().then((resp) => {\r\n\r\n      this.latitude = resp.coords.latitude;\r\n      this.longitude = resp.coords.longitude;\r\n      this.accuracy  = resp.coords.accuracy;\r\n\r\n      const latLng = new google.maps.LatLng(resp.coords.latitude, resp.coords.longitude);\r\n      const mapOptions = {\r\n        center: latLng,\r\n        zoom: 16,\r\n        mapTypeId: google.maps.MapTypeId.ROADMAP\r\n      };\r\n\r\n      this.getAddressFromCoords(resp.coords.latitude, resp.coords.longitude);\r\n\r\n      this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n\r\n      this.map.addListener('dragend', () => {\r\n\r\n        this.latitude = this.map.center.lat();\r\n        this.longitude = this.map.center.lng();\r\n\r\n        this.getAddressFromCoords(this.map.center.lat(), this.map.center.lng());\r\n      });\r\n\r\n    }).catch((error) => {\r\n      console.log('Error getting location', error);\r\n    });\r\n  }\r\n\r\n  getAddressFromCoords(lattitude, longitude) {\r\n    console.log('getAddressFromCoords ' + lattitude + ' ' + longitude);\r\n    const options: NativeGeocoderOptions = {\r\n      useLocale: true,\r\n      maxResults: 5\r\n    };\r\n\r\n    this.nativeGeocoder.reverseGeocode(lattitude, longitude, options)\r\n      .then((result: NativeGeocoderResult[]) => {\r\n        this.address = '';\r\n        const responseAddress = [];\r\n        for (const [key, value] of Object.entries(result[0])) {\r\n          if (value.length > 0)\r\n            {responseAddress.push(value);}\r\n\r\n        }\r\n        responseAddress.reverse();\r\n        for (const value of responseAddress) {\r\n          this.address += value + ', ';\r\n        }\r\n        this.address = this.address.slice(0, -2);\r\n      })\r\n      .catch((error: any) => {\r\n        this.address = 'Address Not Available!';\r\n      });\r\n\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}